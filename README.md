# MPLX - Multi-Language Programming Language eXperiment

Современный язык программирования с многоязычной экосистемой разработки, демонстрирующий интеграцию различных технологий и архитектурных подходов.

## Описание проекта

MPLX представляет собой полноценный язык программирования, реализованный с использованием нескольких языков программирования для различных компонентов системы. Проект демонстрирует возможности создания комплексных developer tools с применением современных технологий.

### Возможности языка:
- Функции, переменные, циклы, условия
- Математические операции
- Рекурсия и сложные алгоритмы
- Компиляция в байткод и выполнение на виртуальной машине

## Используемые технологии

### C++20 - Ядро системы
- **Назначение**: Компилятор, виртуальная машина, CLI инструменты
- **Причины выбора**: Высокая производительность, контроль над памятью, стандарт в системном программировании
- **Компоненты**: Lexer, Parser, Bytecode Compiler, Stack-based VM

### TypeScript/Node.js - IDE интеграция
- **Назначение**: Language Server Protocol, VS Code extension
- **Причины выбора**: Нативная поддержка VS Code, современная экосистема веб-разработки
- **Компоненты**: LSP сервер, синтаксический анализатор, диагностика ошибок

### C#/.NET 8.0 - Enterprise интеграция
- **Назначение**: .NET wrapper, межъязыковая интеграция
- **Причины выбора**: Широкая распространенность в enterprise среде, P/Invoke возможности
- **Компоненты**: Нативная DLL интеграция, runtime wrapper

### CMake - Система сборки
- **Назначение**: Кросс-платформенная сборка, управление зависимостями
- **Причины выбора**: Индустриальный стандарт для C++ проектов

### PowerShell - Автоматизация
- **Назначение**: Скрипты сборки и развертывания
- **Причины выбора**: Нативная поддержка Windows, интеграция с .NET

## Архитектура системы

```
mplx/
├── Domain/              # Языковые конструкции (C++20)
├── Application/         # Компилятор и VM (C++20)
├── Infrastructure/      # Интеграции (.NET, C++)
├── Presentation/        # UI и CLI (TypeScript, C++)
└── scripts/             # Скрипты сборки (PowerShell)
```

### Clean Architecture
Проект следует принципам Clean Architecture с четким разделением слоев:
- **Domain**: Языковые конструкции и абстракции
- **Application**: Бизнес-логика компиляции и выполнения
- **Infrastructure**: Внешние интеграции и зависимости
- **Presentation**: Пользовательский интерфейс и API

## Быстрый старт

### Требования
- Windows 10/11
- Visual Studio 2019+ или MSVC Build Tools
- Node.js 18+
- .NET 8.0 SDK

### Установка и сборка

```powershell
# 1. Настройка окружения
.\scripts\bootstrap-mplx.ps1

# 2. Добавление компонентов  
.\scripts\extend-mplx.ps1

# 3. Сборка DLL для .NET интеграции
.\scripts\build-simple-dll.ps1
```

## Использование

### CLI инструменты
```bash
# Проверка синтаксиса
mplx --check file.mplx

# Извлечение символов
mplx --symbols file.mplx

# Выполнение кода
mplx --run file.mplx
```

### .NET интеграция
```csharp
using Mplx.DotNet;

var result = MplxRuntime.RunFromSource(source, "main");
var diagnostics = MplxRuntime.CheckSource(source);
```

### VS Code поддержка
- Синтаксическая подсветка
- Автодополнение
- Диагностика ошибок
- Навигация по коду

## Примеры кода

### Простая программа
```mplx
fn main() -> i32 {
    let x = 2;
    let y = 4;
    return x + y;
}
```

### Рекурсивная функция
```mplx
fn fibonacci(n: i32) -> i32 {
    if (n <= 1) {
        return n;
    } else {
        return fibonacci(n - 1) + fibonacci(n - 2);
    }
}

fn main() -> i32 {
    return fibonacci(10);
}
```

## Технические детали

### Компиляция
- Лексический анализ с поддержкой ключевых слов и операторов
- Рекурсивный нисходящий парсер
- Генерация байткода с оптимизациями
- Виртуальная машина со стековой архитектурой

### Интеграции
- **C API**: Нативная библиотека для межъязыкового взаимодействия
- **P/Invoke**: .NET интеграция через нативные вызовы
- **LSP**: Language Server Protocol для IDE поддержки
- **VS Code Extension**: Полноценная поддержка разработки

### Производительность
- Компиляция: < 100ms для типичных файлов
- Выполнение: Нативная скорость виртуальной машины
- Память: Минимальное потребление благодаря C++

## Разработка

### Структура кода
- Модульная архитектура
- Четкое разделение ответственности
- Современные C++20 возможности
- TypeScript с строгой типизацией

### Тестирование
- Unit тесты для всех компонентов
- Интеграционные тесты
- Производительные тесты

### Документация
- Подробные комментарии в коде
- API документация
- Примеры использования
